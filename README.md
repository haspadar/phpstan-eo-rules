# PHPStan EO Rules

[![PHP Version](https://img.shields.io/badge/PHP-8.2-blue)](https://www.php.net/releases/8.2/)

---

## ğŸ“¦ About

A collection of PHPStan rules enforcing the principles of Elegant Objects:
immutability, composition, no static state, and explicit contracts.

## ğŸ” Available Rules

### NoNullReturnRule

Prohibits returning `null` from methods. Instead of returning null, methods should either return a meaningful value or throw an exception. This eliminates null checks and makes code more predictable.

**âŒ Bad:**
```php
public function find(int $id): ?User
{
    return null; // Error: Returning null is forbidden
}
```

**âœ… Good:**
```php
public function find(int $id): User
{
    throw new UserNotFoundException($id);
}

// Or use a Null Object pattern
public function find(int $id): User
{
    return new GuestUser();
}
```

To suppress this rule for specific cases:
```php
/** @phpstan-ignore NoNullReturn */
return null;
```

---

## âš™ï¸ Installation
```bash
composer require --dev haspadar/phpstan-eo-rules
```

Enable in your `phpstan.neon`:
```neon
includes:
    - vendor/haspadar/phpstan-eo-rules/extension.neon
```

Requirements: PHP 8.2+

---

## ğŸš€ Releases

Release notes are automatically generated by [GitHub Release Drafter](https://github.com/release-drafter/release-drafter) from merged pull requests and categorized by their labels.

To publish a release:

1. Review and edit the draft release in GitHub
2. Publish the release

A git tag will be created automatically.

---

## ğŸ§ª Development

### Local Setup

#### Option 1: Docker (Recommended)

Use Docker to work on the project without installing PHP locally:

```bash
# Build the container
docker compose build

# Install dependencies
docker compose run --rm php composer install

# Run tests
docker compose run --rm php vendor/bin/phpunit

# Run PHPStan
docker compose run --rm php vendor/bin/phpstan analyse

# Open interactive shell
docker compose run --rm php bash
```

#### Option 2: Local PHP

If you have PHP 8.2+ installed locally:

```bash
# Install dependencies
composer install

# Run tests
composer test

# Run PHPStan
composer phpstan
```

---

## ğŸ“„ License

[MIT](LICENSE)